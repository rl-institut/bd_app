{% extends "base_footer_button.html" %}

{% load static %}

{% block content %}
  <div class="main-content">
    <div>
      <div class="category-header">
        <h2 class="category-title">
          <span class="category-title__name">Ergebnisse</span>
        </h2>
      </div>
      <div>
        Herzlichen Glückwunsch, die Berechnung ist abgeschlossen!
        <br />
        Hier sehen Sie eine Übersicht der Ergebnisse für Ihre gewählten Szenarien.
      </div>
      <br />
      <p> Wählen Sie eine Kategorie aus, um weitere Details zu Energieverbrauch, Kosten oder CO₂-Einsparungen zu erhalten.
      </p>
      <div class="tabs">
        <div class="tab-header">
          <button class="tab-button active" data-tab="tab-consumption">Verbrauch</button>
          <button class="tab-button" data-tab="tab-cost">Kosten</button>
          <button class="tab-button" data-tab="tab-emission">Emissionen</button>
        </div>
        <div class="tab-content active" id="tab-consumption">
          <!-- Verbrauch-Inhalt -->
          <h2 class="accordion-header" id="panelsStayOpen-headingOne">
              Verbrauch
          </h2>
          <p>
            Hier sehen Sie Ihren aktuellen Endenergiebedarf für Raumwärme und Warmwasser im Vergleich zu den
            von Ihnen erstellten Sanierungsszenarien.
            Die Berechnung des heutigen Bedarfs basiert auf Ihren Angaben und der Zuordnung Ihres Gebäudes zu einem von
            rund 665.000 standardisierten Gebäudetypen. So können Sie einschätzen, wie sich verschiedene Maßnahmen auf
            den Energiebedarf auswirken würden.
          </p>
          <strong>Heizenergieverbrauch in kWh/(m²*a) (Endenergie)</strong>
          <object class="energy_efficiency"
                      type="image/svg+xml"
                      data="/static/images/svg/energy_consumption_index.svg"></object>
          <p>Der Energieverbrauch Ihres Gebäudes hängt von der verbauten Heizung ab und unterliegt saisonalen Schwankungen:</p>
          <br />
          <div id="heating_chart" class="chart_big"></div>
          <p>
            In dieser Übersicht sehen Sie, wie sich die von Ihnen im Szenario gewählten Sanierungsmaßnahmen und Technologiewechsel
            auf den Energieverbrauch Ihres Gebäudes auswirken. Für jede Maßnahme wird die prozentuale Veränderung im
            Energieverbrauch in % angegeben, sodass Sie den Effekt einzelner Maßnahme einfacher nachvollziehen können.
          </p>
          <strong>Energetische Einsparung in %:</strong>
          {{ consumption_table_html|safe }}
        </div>
        <div class="tab-content" id="tab-cost">
          <!-- Kosten-Inhalt -->
          <h2 class="accordion-header" id="panelsStayOpen-headingTwo">
                Kosten
                <span id="cost_chart" class="chart_small"></span>
          </h2>
          <p>
            Hier sehen Sie die Gesamtkosten für jedes Ihrer gewählten Szenarien über unterschiedliche Zeiträume.
            In dieser Wirtschaftlichkeitsbetrachtung fließen Investitions-, Betriebs-, Wartungs- und Brennstoffkosten ein –
            sowohl zum heutigen Zeitpunkt als auch über einen Betrachtungszeitraum von 15 Jahren. So sehen Sie, welchen finanziellen
            Aufwand ein Heizszenario heute und über einen längeren Betrachtungszeitraum verursacht.</p>
              <br />
              <div>
                <button onclick="updateEnergyCostChart('future')">In 15 Jahren</button>
                <button onclick="updateEnergyCostChart('now')">Heute</button>
              </div>
              <div id="financial_expense_chart" class="chart_big"></div>
              <br />
              <p>
                Hier finden Sie eine detaillierte Aufschlüsselung der Investitionskosten für Sanierungsmaßnahmen sowie
                Technologiewechsel, der energetischen Aufwendungen und Einsparungen durch Brennstoff- und Betriebskosten sowie
                der für Sie relevanten Zuschüsse über den Betrachtungszeitraum von 15 Jahren. Die angegebene Summe zeigt, welchen
                Betrag Sie nach Abzug der Einsparungen selbst aufbringen müssten.</p>
              <br />
              <div class="tabs-container">
                {# 1) Radio-Buttons + Labels #}
                {% for scenario in scenarios %}
                  <input type="radio"
                         id="{{ scenario.id }}"
                         name="tabs"
                         class="tab-input"
                         {% if forloop.first %}checked{% endif %} />
                  <label for="{{ scenario.id }}" class="tab-label tab-{{ scenario.index }}">{{ scenario.label }}</label>
                {% endfor %}
                {# 2) Inhalt der Tabs #}
                <div class="tabs-content">
                  {% for scenario in scenarios %}
                    <div class="tab-content {{ scenario.id }}">
                      {{ scenario.investment_table|safe }}
                      <div class="foldable-wrapper">
                        {{ scenario.subsidies_table|safe }}
                      </div>
                      {{ scenario.savings_table|safe }}
                      {{ scenario.total_cost_table|safe }}
                      {{ scenario.total_cost_15_years_table|safe }}
                    </div>
                  {% endfor %}
                </div>
                <br />
                <p>Ihre jährlichen Energiekosten für <span class="electricity">Strom</span> und <span class="heating">Heizung & Warmwasser</span> und Ihr Einsparpotenzial:</p>
                <br />
                <br />
                <strong>placeholder for chart "Energiekosten pro Jahr in €"</strong>
                <div id="energycost_chart" class="chart_big"></div>
                <br />
                <br />
          </div>
        </div>
        <div class="tab-content" id="tab-emission">
          <!-- Emissionen-Inhalt -->
          <h2 class="accordion-header" id="panelsStayOpen-headingThree">
                Emissionen
                <span id="emission_chart" class="chart_small"></span>
          </h2>
          <p>Je nach eingesetzter Heizung und Sanierungsmaßnahmen fallen unterschiedlich hohe CO<sub>2</sub>-Emissionen an.</p>
          <br />
          <p>Für jede Tonne emittiertes CO<sub>2</sub> fallen seit 2021 Kosten an.
          Diese Kosten werden steigen und einen maßgeblichen Teil der laufenden Energiekosten darstellen:</p>
          <div id="co2_chart" class="chart_big"></div>
          <div class="saving_forest">
            Sehr gut, die Maßnahmen in deinen
            <br />
            Szenarien helfen, <span class="saving_emission">Emissionen zu vermeiden.</span>
            <object class="plant_in_hand"
                    type="image/svg+xml"
                    data="/static/images/svg/plant_in_hand.svg"></object>
            <br />
            <br />
            Zur Einordnung:
            <br />
            <br />
            <span class="hectare">{{ hectare_scenario1 }} Hektar</span> zusätzlicher Wald wäre nötig, um die Einsparungen in <span class="scenario1">Szenario 1</span> zu erreichen.
            <br />
            <br />
            <span class="hectare">{{ hectare_scenario2 }} Hektar</span> zusätzlicher Wald wäre nötig, um die Einsparungen in <span class="scenario2">Szenario 2</span> zu erreichen.
        </div>
      </div>
      <div class="help" id="flow-instance-boxes">
        {% for box in scenario_boxes %}
          <c-layouts.renovation :box="box"></c-layouts.renovation>
        {% endfor %}
      </div>
    </div>
{% endblock content %}

{% block javascript %}
  <script type="text/javascript" src="{% static 'vendors/echarts/js/echarts.min.js' %}"></script>
  <script type="module" src="{% static 'js/results.js' %}"></script>
{% endblock javascript %}

{% block inline_javascript %}
  {{ cost_chart_data|json_script:"cost_chart_data" }}
  {{ emission_chart_data|json_script:"emission_chart_data" }}
  {{ heating_chart_data|json_script:"heating_chart_data" }}
  {{ investment_chart_data|json_script:"investment_chart_data" }}
  {{ financial_expense_chart_data_future|json_script:"financial_expense_chart_data_future" }}
  {{ financial_expense_chart_data_now|json_script:"financial_expense_chart_data_now" }}
  {{ energycost_chart_data|json_script:"energycost_chart_data" }}
  {{ co2_chart_data|json_script:"co2_chart_data" }}
{% endblock inline_javascript %}
